import { CharacterClass } from '@/types/class';

export const alchemist: CharacterClass = {
  name: 'Alchemist',
  source: 'APG',
  description: 'A master of potions, mutagens, and volatile bombs who uses scientific knowledge and alchemical expertise in place of traditional magic.',
  hitDie: 8,
  babProgression: 'threeQuarter',
  goodSaves: ['fortitude', 'reflex'],
  skillRanksPerLevel: 4,
  classSkills: [
    'Appraise', 'Craft', 'Disable Device', 'Fly', 'Heal',
    'Knowledge (Arcana)', 'Knowledge (Nature)', 'Perception',
    'Profession', 'Sleight of Hand', 'Spellcraft', 'Survival',
    'Use Magic Device',
  ],
  classFeatures: [
    { name: 'Alchemy', level: 1, description: 'Prepare alchemical extracts using Intelligence. Can also create mundane alchemical items more efficiently.' },
    { name: 'Bomb', level: 1, description: 'Throw bombs as a ranged touch attack dealing 1d6 + Int modifier fire damage. Damage increases by 1d6 every 2 levels. Splash damage equals minimum damage.' },
    { name: 'Brew Potion', level: 1, description: 'Gain Brew Potion as a bonus feat.' },
    { name: 'Mutagen', level: 1, description: 'Prepare a mutagen granting +2 natural armor, +4 alchemical bonus to one physical ability score, and -2 penalty to corresponding mental ability score for 10 min/level.' },
    { name: 'Throw Anything', level: 1, description: 'Gain Throw Anything as a bonus feat. Add Intelligence modifier to damage with splash weapons, including bombs.' },
    { name: 'Discovery', level: 2, description: 'Select a discovery at 2nd level and every 2 levels thereafter. Discoveries modify bombs, mutagen, or grant other alchemical abilities.' },
    { name: 'Poison Resistance', level: 2, description: '+2 bonus on saves against poison. Increases to +4 at 5th, +6 at 8th. Immunity at 10th level.' },
    { name: 'Poison Use', level: 2, description: 'Cannot accidentally poison self when applying poison to a weapon.' },
    { name: 'Swift Alchemy', level: 6, description: 'Create alchemical items in half the normal time.' },
    { name: 'Persistent Mutagen', level: 14, description: 'Mutagen lasts 1 hour per level.' },
    { name: 'Instant Alchemy', level: 18, description: 'Create alchemical items as a full-round action.' },
    { name: 'Grand Discovery', level: 20, description: 'Select a grand discovery, gaining a powerful capstone ability.' },
  ],
  spellProgression: {
    type: 'prepared',
    castingAbility: 'int',
    maxSpellLevel: 6,
    spellsPerDay: {
      1:  { 1: 1 },
      2:  { 1: 2 },
      3:  { 1: 3 },
      4:  { 1: 3, 2: 1 },
      5:  { 1: 4, 2: 2 },
      6:  { 1: 4, 2: 3 },
      7:  { 1: 4, 2: 3, 3: 1 },
      8:  { 1: 4, 2: 4, 3: 2 },
      9:  { 1: 5, 2: 4, 3: 3 },
      10: { 1: 5, 2: 4, 3: 3, 4: 1 },
      11: { 1: 5, 2: 4, 3: 4, 4: 2 },
      12: { 1: 5, 2: 5, 3: 4, 4: 3 },
      13: { 1: 5, 2: 5, 3: 4, 4: 3, 5: 1 },
      14: { 1: 5, 2: 5, 3: 4, 4: 4, 5: 2 },
      15: { 1: 5, 2: 5, 3: 5, 4: 4, 5: 3 },
      16: { 1: 5, 2: 5, 3: 5, 4: 4, 5: 3, 6: 1 },
      17: { 1: 5, 2: 5, 3: 5, 4: 4, 5: 4, 6: 2 },
      18: { 1: 5, 2: 5, 3: 5, 4: 5, 5: 4, 6: 3 },
      19: { 1: 5, 2: 5, 3: 5, 4: 5, 5: 5, 6: 4 },
      20: { 1: 5, 2: 5, 3: 5, 4: 5, 5: 5, 6: 5 },
    },
  },
  classResources: [
    {
      name: 'Bombs',
      description: 'Create and throw explosive bombs as a ranged touch attack. Number per day equals class level + Intelligence modifier.',
      getUsesAtLevel: (level, intMod?) => level + (intMod ?? 0),
      resetsOn: 'rest',
    },
  ],
  startingWealth: { dice: { count: 3, sides: 6 }, multiplier: 10, average: 105 },
  proficiencies: {
    weapons: ['simple weapons', 'bombs'],
    armor: ['light armor'],
    shields: [],
  },
};
