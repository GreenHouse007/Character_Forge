import { CharacterClass } from '@/types/class';

export const investigator: CharacterClass = {
  name: 'Investigator',
  source: 'ACG',
  description: 'A master of lore and knowledge who uses keen insight and alchemical expertise to solve mysteries and defeat enemies.',
  hitDie: 8,
  babProgression: 'threeQuarter',
  goodSaves: ['fortitude', 'reflex'],
  skillRanksPerLevel: 6,
  classSkills: [
    'Acrobatics', 'Bluff', 'Climb', 'Craft', 'Diplomacy', 'Disable Device',
    'Disguise', 'Escape Artist', 'Heal', 'Intimidate',
    'Knowledge (Arcana)', 'Knowledge (Dungeoneering)', 'Knowledge (Engineering)',
    'Knowledge (Geography)', 'Knowledge (History)', 'Knowledge (Local)',
    'Knowledge (Nature)', 'Knowledge (Nobility)', 'Knowledge (Planes)',
    'Knowledge (Religion)', 'Linguistics', 'Perception', 'Perform',
    'Profession', 'Sense Motive', 'Sleight of Hand', 'Spellcraft',
    'Stealth', 'Use Magic Device',
  ],
  classFeatures: [
    { name: 'Alchemy', level: 1, description: 'Can create alchemical extracts (prepared like spells using Intelligence), mutagens, and other alchemical items.' },
    { name: 'Inspiration', level: 1, description: 'Inspiration pool equal to 1/2 level + Int modifier. Spend inspiration to add 1d6 to skill and ability checks. Free on Knowledge, Linguistics, and Spellcraft.' },
    { name: 'Trapfinding', level: 1, description: 'Add 1/2 level to Perception to locate traps and to Disable Device. Can disarm magic traps.' },
    { name: 'Poison Lore', level: 2, description: 'Cannot accidentally poison self when applying poison. +2 on saves vs poison. Can identify poisons with a Knowledge (nature) check.' },
    { name: 'Poison Resistance', level: 2, description: '+2 bonus on saves against poison. Increases to +4 at 5th, +6 at 8th, immunity at 11th.' },
    { name: 'Investigator Talent', level: 3, description: 'Select an investigator talent at 3rd level and every 2 levels thereafter.' },
    { name: 'Studied Combat', level: 4, description: 'Study a foe as a move action, gaining +1/2 level insight bonus on melee attack and damage rolls. Lasts Int modifier rounds or until studied strike is used.' },
    { name: 'Studied Strike', level: 4, description: 'When studied combat ends, deal +1d6 extra damage, increasing by 1d6 every 2 levels after 4th.' },
    { name: 'Swift Alchemy', level: 4, description: 'Create alchemical items in half the normal time.' },
    { name: 'Poison Immunity', level: 11, description: 'Immune to poison.' },
    { name: 'True Inspiration', level: 20, description: 'Use inspiration on all checks with no pool cost. Inspiration die increases to 1d8.' },
  ],
  spellProgression: {
    type: 'prepared',
    castingAbility: 'int',
    maxSpellLevel: 6,
    spellsPerDay: {
      1:  { 1: 1 },
      2:  { 1: 2 },
      3:  { 1: 3 },
      4:  { 1: 3, 2: 1 },
      5:  { 1: 4, 2: 2 },
      6:  { 1: 4, 2: 3 },
      7:  { 1: 4, 2: 3, 3: 1 },
      8:  { 1: 4, 2: 4, 3: 2 },
      9:  { 1: 5, 2: 4, 3: 3 },
      10: { 1: 5, 2: 4, 3: 3, 4: 1 },
      11: { 1: 5, 2: 4, 3: 4, 4: 2 },
      12: { 1: 5, 2: 5, 3: 4, 4: 3 },
      13: { 1: 5, 2: 5, 3: 4, 4: 3, 5: 1 },
      14: { 1: 5, 2: 5, 3: 4, 4: 4, 5: 2 },
      15: { 1: 5, 2: 5, 3: 5, 4: 4, 5: 3 },
      16: { 1: 5, 2: 5, 3: 5, 4: 4, 5: 3, 6: 1 },
      17: { 1: 5, 2: 5, 3: 5, 4: 4, 5: 4, 6: 2 },
      18: { 1: 5, 2: 5, 3: 5, 4: 5, 5: 4, 6: 3 },
      19: { 1: 5, 2: 5, 3: 5, 4: 5, 5: 5, 6: 4 },
      20: { 1: 5, 2: 5, 3: 5, 4: 5, 5: 5, 6: 5 },
    },
  },
  classResources: [
    {
      name: 'Inspiration',
      description: 'Pool of inspiration points for adding 1d6 to skill checks and ability checks. Free on Knowledge, Linguistics, and Spellcraft.',
      getUsesAtLevel: (level, intMod?) => Math.floor(level / 2) + (intMod ?? 0),
      resetsOn: 'rest',
    },
  ],
  startingWealth: { dice: { count: 3, sides: 6 }, multiplier: 10, average: 105 },
  proficiencies: {
    weapons: ['simple weapons', 'hand crossbow', 'rapier', 'sap', 'shortbow', 'short sword', 'sword cane'],
    armor: ['light armor'],
    shields: [],
  },
};
