import { CharacterClass } from '@/types/class';

export const bloodrager: CharacterClass = {
  name: 'Bloodrager',
  source: 'ACG',
  description: 'A fierce warrior whose bloodline grants both arcane power and unbridled fury, blending the rage of the barbarian with the magic of the sorcerer.',
  hitDie: 10,
  babProgression: 'full',
  goodSaves: ['fortitude'],
  skillRanksPerLevel: 4,
  classSkills: [
    'Acrobatics', 'Climb', 'Craft', 'Handle Animal', 'Intimidate',
    'Knowledge (Arcana)', 'Perception', 'Ride', 'Spellcraft',
    'Survival', 'Swim',
  ],
  classFeatures: [
    { name: 'Bloodline', level: 1, description: 'Choose a bloodline that grants bonus feats, bonus spells, and bloodline powers.' },
    { name: 'Bloodrage', level: 1, description: 'Enter a bloodrage gaining +4 morale bonus to Str and Con, +2 morale bonus on Will saves, and -2 penalty to AC. Can cast bloodrager spells while bloodraging.' },
    { name: 'Fast Movement', level: 1, description: '+10 feet land speed when in medium or lighter armor and not carrying a heavy load.' },
    { name: 'Blood Casting', level: 4, description: 'Can cast bloodrager spells while bloodraging without concentration checks.' },
    { name: 'Eschew Materials', level: 4, description: 'Gain Eschew Materials as a bonus feat.' },
    { name: 'Uncanny Dodge', level: 2, description: 'Cannot be caught flat-footed, keep Dex bonus to AC even if attacked by invisible attacker.' },
    { name: 'Blood Sanctuary', level: 3, description: 'Allies do not need to make saving throws against bloodrager spells.' },
    { name: 'Improved Uncanny Dodge', level: 5, description: 'Cannot be flanked except by a rogue of 4+ levels higher.' },
    { name: 'Damage Reduction', level: 7, description: 'Gain DR 1/â€”. Increases by 1 every 3 levels thereafter.' },
    { name: 'Greater Bloodrage', level: 11, description: 'Morale bonuses to Str and Con increase to +6, Will save bonus to +3.' },
    { name: 'Indomitable Will', level: 14, description: '+4 bonus on Will saves vs enchantment spells while bloodraging.' },
    { name: 'Tireless Bloodrage', level: 17, description: 'No longer fatigued after bloodrage ends.' },
    { name: 'Mighty Bloodrage', level: 20, description: 'Morale bonuses to Str and Con increase to +8, Will save bonus to +4.' },
  ],
  spellProgression: {
    type: 'spontaneous',
    castingAbility: 'cha',
    maxSpellLevel: 4,
    spellsPerDay: {
      1:  {},
      2:  {},
      3:  {},
      4:  { 1: 1 },
      5:  { 1: 1 },
      6:  { 1: 1 },
      7:  { 1: 1, 2: 1 },
      8:  { 1: 1, 2: 1 },
      9:  { 1: 2, 2: 1 },
      10: { 1: 2, 2: 1, 3: 1 },
      11: { 1: 2, 2: 1, 3: 1 },
      12: { 1: 2, 2: 2, 3: 1 },
      13: { 1: 3, 2: 2, 3: 1, 4: 1 },
      14: { 1: 3, 2: 2, 3: 1, 4: 1 },
      15: { 1: 3, 2: 2, 3: 2, 4: 1 },
      16: { 1: 3, 2: 3, 3: 2, 4: 1 },
      17: { 1: 4, 2: 3, 3: 2, 4: 1 },
      18: { 1: 4, 2: 3, 3: 2, 4: 2 },
      19: { 1: 4, 2: 3, 3: 3, 4: 2 },
      20: { 1: 4, 2: 4, 3: 3, 4: 3 },
    },
    spellsKnown: {
      1:  {},
      2:  {},
      3:  {},
      4:  { 1: 2 },
      5:  { 1: 3 },
      6:  { 1: 4 },
      7:  { 1: 4, 2: 2 },
      8:  { 1: 4, 2: 3 },
      9:  { 1: 5, 2: 4 },
      10: { 1: 5, 2: 4, 3: 2 },
      11: { 1: 5, 2: 4, 3: 3 },
      12: { 1: 6, 2: 5, 3: 4 },
      13: { 1: 6, 2: 5, 3: 4, 4: 2 },
      14: { 1: 6, 2: 5, 3: 4, 4: 3 },
      15: { 1: 6, 2: 6, 3: 5, 4: 4 },
      16: { 1: 6, 2: 6, 3: 5, 4: 4 },
      17: { 1: 6, 2: 6, 3: 5, 4: 4 },
      18: { 1: 6, 2: 6, 3: 6, 4: 5 },
      19: { 1: 6, 2: 6, 3: 6, 4: 5 },
      20: { 1: 6, 2: 6, 3: 6, 4: 5 },
    },
  },
  classResources: [
    {
      name: 'Bloodrage',
      description: 'Enter a bloodrage gaining +4 morale bonus to Str and Con, +2 morale bonus on Will saves, -2 penalty to AC. Can cast bloodrager spells while bloodraging.',
      getUsesAtLevel: (level, conMod?) => 4 + (conMod ?? 0) + (level - 1) * 2,
      resetsOn: 'rest',
    },
  ],
  startingWealth: { dice: { count: 3, sides: 6 }, multiplier: 10, average: 105 },
  proficiencies: {
    weapons: ['simple weapons', 'martial weapons'],
    armor: ['light armor', 'medium armor'],
    shields: ['shields (except tower shields)'],
  },
};
