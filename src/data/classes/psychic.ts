import { CharacterClass } from '../../types/class';

export const psychic: CharacterClass = {
  name: 'Psychic',
  source: 'OA',
  description: 'A powerful psychic spellcaster who draws on the occult power of the mind, channeling mental energy through phrenic amplifications and a chosen psychic discipline.',
  hitDie: 6,
  babProgression: 'half',
  goodSaves: ['will'],
  skillRanksPerLevel: 2,
  classSkills: [
    'Bluff', 'Craft', 'Diplomacy', 'Fly', 'Intimidate',
    'Knowledge (Arcana)', 'Knowledge (Dungeoneering)', 'Knowledge (History)',
    'Knowledge (Local)', 'Knowledge (Nature)', 'Knowledge (Nobility)',
    'Knowledge (Planes)', 'Knowledge (Religion)', 'Linguistics',
    'Perception', 'Profession', 'Sense Motive', 'Spellcraft',
  ],
  classFeatures: [
    { name: 'Knacks', level: 1, description: 'Cast 0-level spells at will.' },
    { name: 'Phrenic Amplification', level: 1, description: 'Select a phrenic amplification at 1st level and every odd level thereafter. Amplifications enhance psychic spells by spending phrenic pool points.' },
    { name: 'Phrenic Pool', level: 1, description: 'A reservoir of mental energy equal to half your psychic level + your Intelligence modifier, used to fuel phrenic amplifications.' },
    { name: 'Psychic Discipline', level: 1, description: 'Choose a psychic discipline that grants bonus spells, discipline powers at 1st, 5th, and 13th level, and a discipline spell list.' },
    { name: 'Detect Thoughts', level: 2, description: 'Can use detect thoughts as a spell-like ability a number of times per day equal to half your psychic level.' },
    { name: 'Telepathic Bond', level: 9, description: 'Can use telepathic bond as a spell-like ability once per day.' },
    { name: 'Major Amplification', level: 11, description: 'Can select major amplifications in addition to normal phrenic amplifications.' },
    { name: 'Remade Self', level: 20, description: 'Your body and mind are perfected by psychic power. You are immune to death effects and gain telepathy 100 feet.' },
  ],
  spellProgression: {
    type: 'spontaneous',
    castingAbility: 'int',
    maxSpellLevel: 9,
    spellsPerDay: {
      1:  { 0: 4, 1: 2 },
      2:  { 0: 5, 1: 3 },
      3:  { 0: 5, 1: 4 },
      4:  { 0: 6, 1: 4, 2: 2 },
      5:  { 0: 6, 1: 4, 2: 3 },
      6:  { 0: 6, 1: 4, 2: 4, 3: 2 },
      7:  { 0: 6, 1: 5, 2: 4, 3: 3 },
      8:  { 0: 6, 1: 5, 2: 4, 3: 4, 4: 2 },
      9:  { 0: 6, 1: 5, 2: 5, 3: 4, 4: 3 },
      10: { 0: 6, 1: 5, 2: 5, 3: 4, 4: 4, 5: 2 },
      11: { 0: 6, 1: 5, 2: 5, 3: 5, 4: 4, 5: 3 },
      12: { 0: 6, 1: 5, 2: 5, 3: 5, 4: 4, 5: 4, 6: 2 },
      13: { 0: 6, 1: 5, 2: 5, 3: 5, 4: 5, 5: 4, 6: 3 },
      14: { 0: 6, 1: 5, 2: 5, 3: 5, 4: 5, 5: 4, 6: 4, 7: 2 },
      15: { 0: 6, 1: 5, 2: 5, 3: 5, 4: 5, 5: 5, 6: 4, 7: 3 },
      16: { 0: 6, 1: 5, 2: 5, 3: 5, 4: 5, 5: 5, 6: 4, 7: 4, 8: 2 },
      17: { 0: 6, 1: 5, 2: 5, 3: 5, 4: 5, 5: 5, 6: 5, 7: 4, 8: 3 },
      18: { 0: 6, 1: 5, 2: 5, 3: 5, 4: 5, 5: 5, 6: 5, 7: 4, 8: 4, 9: 2 },
      19: { 0: 6, 1: 5, 2: 5, 3: 5, 4: 5, 5: 5, 6: 5, 7: 5, 8: 4, 9: 3 },
      20: { 0: 6, 1: 5, 2: 5, 3: 5, 4: 5, 5: 5, 6: 5, 7: 5, 8: 5, 9: 4 },
    },
    spellsKnown: {
      1:  { 0: 4, 1: 2 },
      2:  { 0: 5, 1: 2 },
      3:  { 0: 5, 1: 3 },
      4:  { 0: 6, 1: 3, 2: 1 },
      5:  { 0: 6, 1: 4, 2: 2 },
      6:  { 0: 7, 1: 4, 2: 2, 3: 1 },
      7:  { 0: 7, 1: 5, 2: 3, 3: 2 },
      8:  { 0: 8, 1: 5, 2: 3, 3: 2, 4: 1 },
      9:  { 0: 8, 1: 5, 2: 4, 3: 3, 4: 2 },
      10: { 0: 9, 1: 5, 2: 4, 3: 3, 4: 2, 5: 1 },
      11: { 0: 9, 1: 5, 2: 5, 3: 4, 4: 3, 5: 2 },
      12: { 0: 9, 1: 5, 2: 5, 3: 4, 4: 3, 5: 2, 6: 1 },
      13: { 0: 9, 1: 5, 2: 5, 3: 4, 4: 4, 5: 3, 6: 2 },
      14: { 0: 9, 1: 5, 2: 5, 3: 4, 4: 4, 5: 3, 6: 2, 7: 1 },
      15: { 0: 9, 1: 5, 2: 5, 3: 5, 4: 4, 5: 4, 6: 3, 7: 2 },
      16: { 0: 9, 1: 5, 2: 5, 3: 5, 4: 4, 5: 4, 6: 3, 7: 2, 8: 1 },
      17: { 0: 9, 1: 5, 2: 5, 3: 5, 4: 4, 5: 4, 6: 4, 7: 3, 8: 2 },
      18: { 0: 9, 1: 5, 2: 5, 3: 5, 4: 5, 5: 4, 6: 4, 7: 3, 8: 2, 9: 1 },
      19: { 0: 9, 1: 5, 2: 5, 3: 5, 4: 5, 5: 5, 6: 4, 7: 4, 8: 3, 9: 2 },
      20: { 0: 9, 1: 5, 2: 5, 3: 5, 4: 5, 5: 5, 6: 4, 7: 4, 8: 4, 9: 3 },
    },
  },
  classResources: [
    {
      name: 'Phrenic Pool',
      description: 'A reservoir of mental energy used to fuel phrenic amplifications. Equal to half your psychic level + your Intelligence modifier.',
      getUsesAtLevel: (level, abilityModifier) => Math.floor(level / 2) + (abilityModifier ?? 0),
      resetsOn: 'rest',
    },
  ],
  startingWealth: { dice: { count: 2, sides: 6 }, multiplier: 10, average: 70 },
  proficiencies: {
    weapons: ['simple weapons'],
    armor: [],
    shields: [],
  },
};
