import { CharacterClass } from '../../types/class';

export const occultist: CharacterClass = {
  name: 'Occultist',
  source: 'OA',
  description: 'A practitioner of occult magic who channels psychic energy through invested implements, unlocking focus powers and casting spells tied to the schools of magic his implements represent.',
  hitDie: 8,
  babProgression: 'threeQuarter',
  goodSaves: ['fortitude', 'will'],
  skillRanksPerLevel: 4,
  classSkills: [
    'Appraise', 'Craft', 'Diplomacy', 'Disable Device', 'Disguise', 'Fly',
    'Knowledge (Arcana)', 'Knowledge (Engineering)', 'Knowledge (History)',
    'Knowledge (Planes)', 'Knowledge (Religion)', 'Linguistics',
    'Perception', 'Profession', 'Sense Motive', 'Sleight of Hand',
    'Spellcraft', 'Use Magic Device',
  ],
  classFeatures: [
    { name: 'Implements', level: 1, description: 'Select implement schools at 1st level and gain additional implements at 2nd, 6th, 10th, 14th, and 18th level. Each implement grants a base focus power and access to spells of its school.' },
    { name: 'Knacks', level: 1, description: 'Cast 0-level spells at will.' },
    { name: 'Mental Focus', level: 1, description: 'A pool of mental energy equal to your occultist level + your Intelligence modifier. Invest focus into implements each day to power their abilities.' },
    { name: 'Object Reading', level: 2, description: 'Examine an object for 1 minute to learn facts about its history and previous owners through psychic impressions.' },
    { name: 'Focus Powers', level: 3, description: 'Select a focus power at 3rd level and every 2 levels thereafter. Focus powers are fueled by mental focus invested in your implements.' },
    { name: 'Shift Focus', level: 4, description: 'Move mental focus from one implement to another as a standard action, losing 1 point in the transfer.' },
    { name: 'Aura Sight', level: 5, description: 'Read the auras of creatures and objects as a standard action, determining alignment, health, and magical properties.' },
    { name: 'Magic Circles', level: 8, description: 'Draw magic circles to create protective wards, taking 10 minutes to inscribe.' },
    { name: 'Outside Contact', level: 8, description: 'Contact an outsider once per day to gain a bonus spell known from its school for 24 hours. Gain additional contacts at 12th and 16th level.' },
    { name: 'Binding Circles', level: 12, description: 'Use magic circles to bind outsiders contacted through your outside contact ability.' },
    { name: 'Fast Circles', level: 16, description: 'Draw magic circles as a full-round action instead of taking 10 minutes.' },
    { name: 'Implement Mastery', level: 20, description: 'Select one implement school for mastery, gaining the ability to cast its spells without investing mental focus and reducing focus power costs.' },
  ],
  spellProgression: {
    type: 'prepared',
    castingAbility: 'int',
    maxSpellLevel: 6,
    spellsPerDay: {
      1:  { 0: 2, 1: 1 },
      2:  { 0: 3, 1: 2 },
      3:  { 0: 3, 1: 3 },
      4:  { 0: 4, 1: 3, 2: 1 },
      5:  { 0: 4, 1: 4, 2: 2 },
      6:  { 0: 4, 1: 4, 2: 3 },
      7:  { 0: 4, 1: 4, 2: 3, 3: 1 },
      8:  { 0: 4, 1: 4, 2: 4, 3: 2 },
      9:  { 0: 5, 1: 5, 2: 4, 3: 3 },
      10: { 0: 5, 1: 5, 2: 4, 3: 3, 4: 1 },
      11: { 0: 5, 1: 5, 2: 4, 3: 4, 4: 2 },
      12: { 0: 5, 1: 5, 2: 5, 3: 4, 4: 3 },
      13: { 0: 5, 1: 5, 2: 5, 3: 4, 4: 3, 5: 1 },
      14: { 0: 5, 1: 5, 2: 5, 3: 4, 4: 4, 5: 2 },
      15: { 0: 5, 1: 5, 2: 5, 3: 5, 4: 4, 5: 3 },
      16: { 0: 5, 1: 5, 2: 5, 3: 5, 4: 4, 5: 3, 6: 1 },
      17: { 0: 5, 1: 5, 2: 5, 3: 5, 4: 4, 5: 4, 6: 2 },
      18: { 0: 5, 1: 5, 2: 5, 3: 5, 4: 5, 5: 4, 6: 3 },
      19: { 0: 5, 1: 5, 2: 5, 3: 5, 4: 5, 5: 5, 6: 4 },
      20: { 0: 5, 1: 5, 2: 5, 3: 5, 4: 5, 5: 5, 6: 5 },
    },
  },
  classResources: [
    {
      name: 'Mental Focus',
      description: 'A pool of mental energy invested into implements each day to power focus powers and abilities. Equal to your occultist level + your Intelligence modifier.',
      getUsesAtLevel: (level, abilityModifier) => level + (abilityModifier ?? 0),
      resetsOn: 'rest',
    },
  ],
  startingWealth: { dice: { count: 4, sides: 6 }, multiplier: 10, average: 140 },
  proficiencies: {
    weapons: ['simple weapons', 'martial weapons'],
    armor: ['light armor', 'medium armor'],
    shields: ['shields (except tower shields)'],
  },
};
